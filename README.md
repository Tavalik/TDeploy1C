# TDeploy1C
 Консольное приложение для выполнения различных сценариев по запуску 1С, сценариев тестирования информационных баз 1С и пр. 

### Параметры запуска:

- **-path _ЗначениеПараметра_** - Рабочий каталог текущего сценария
- **-settings _ЗначениеПараметра_** - Путь к файлу с настройками текущего сценария. Можно указать несколько файлов, разделенных знаком ";". Если не указан, то будет использоваться файл с именем по маске __TDeploy1C_Settings*.json__ в рабочем каталоге сценария.
- **-ib _ЗначениеПараметра_** - Идентификатор информационной базы для выполнения текущего сценария (задается в файле настроек). Можно указать несколько информационных баз, разделенных знаком ";", в этом случае сценарий будет выполнен последовательно для каждой информационной базы из списка. 
- **-script _ЗначениеПараметра_** - Иденитификтор выполняемого действия (описание см. ниже). Можно указать несколько действий, разделенных знаком ";", в этом случае действия будут выполняться последотвательно. 
- **-scripts _ЗначениеПараметра_** - Путь к файлу описания выполняемых действий в формате json (описание структуры файлов см. ниже). Можно указать несколько файлов, разделенных знаком ";", в этом случае сценарии будут выполняться последовательно. 
- **-logs _ЗначениеПараметра_** - Каталог хранения логов. Если не указан, будет использваться каталог с имененм "_Logs" в рабочем каталоге сценария.
- **-task _ЗначениеПараметра_** - Идентификтор выполняемого задания. Если указан, приложение будет выполняться в режиме выполнения задания. 
- **-debug** - Если указан данный параметр, приложение будет выполняться в режиме отладки, при этом будут выводиться в консоль все отладочные сообщения.
- **-testsettings** - Если указан данный параметр, прилоежние будет выполняться в режиме тестирования настроек. 

### Поддерживаемые сценарии:

Общие:
- Wait - Ждать
- RunApp[1|2|3|4|5][NoWaitCompletion] - ЗапуститьПриложение[1|2|3|4|5][НеЖдатьЗавершения]
- WriteStatusToFile - ЗаписатьСтатусВФайл
        Записывает результат выполнения сценария в файл "TDeploy_Status.txt" в каталоге сценария: 
        0 - ошибок не было, 1 - были ошибки

Сеансы:	
- GetListOfSessions - ПолучитьСписокСеансов
- CloseAllSessions - ЗавершитьВсеСеансы
- LockStartSession - УстановитьБлокировкуНачалаСеансов
- UnlockStartSessions - СнятьБлокировкуНачалаСеансов
- LockScheduledJobs - УстановитьБлокировкуРегламентныхЗаданий
- UnlockScheduledJobs - СнятьБлокировкуРегламентныхЗаданий

Запуск 1С:
- StartEnterprise[ThinClient][TestManager][WithProcessing[1|2|3|4|5]][ClearCache][NoWaitCompletion] - ЗапуститьПредприятие[ТонкийКлиент][МенеджерТестирования][СОбработкой[1|2|3|4|5]][ОчиститьКеш][НеЖдатьЗавершения]
- StartDesigner[NoWaitCompletion] - ЗапуститьКонфигуратор[НеЖдатьЗавершения]

Конфигурация:
- CheckChangesMainCfg - ПроверитьИзмененияОсновнойКонфигурации 
    В случае, если есть изменения, генерируется ошибка
- UpdateDBCfg - ОбновитьКонфигурациюБазыДанных
- DumpCfg - СохранитьКонфигурацию
- LoadCfg - ЗагрузитьКонфигурацию
- MergeCfg - ОбъединитьКонфигурацию 

Расширения:
- LoadExtension[1|2|3|4|5] - ЗагрузитьРасширение[1|2|3|4|5]

Работа с хранилищем:
- CheckChangesInRepository - ПроверитьИзмененияВХранилище 
    В случае, если изменений нет, сценарий прекращается
- ConfigurationRepositoryUpdateCfg - ОбновитьКонфигурациюИзХранилища
- ConfigurationRepositoryLock - ЗахватитьОбъектыИзХранилища
- ConfigurationRepositoryUnLock - ОтменитьЗахватОбъектовИзХранилища
- ConfigurationRepositoryCommit[UnLock] - ПоместитьОбъектыВХранилище[ОтменитьЗахват]
- ConfigurationRepositoryBindCfg - ПодключитьсяКХранилищу
- ConfigurationRepositoryUnbindCfg  - ОтключитьсяОтХранилища
- ConfigurationRepositoryDumpCfg - СохранитьКонфигурациюХранилища
- ConfigurationRepositoryReport - ОтчетПоИсторииХранилища

Файлы:
- DeleteFiles[Cf|dt|Bak|Trn][СurrentBase] - УдалитьФайлы[Cf|dt|Bak|Trn][ТекущейБазы]
- CreateFileForRepositoryLockFromReport - СоздатьФайлДляЗахватаОбъектовПоФайлуИсторииХранилища
- CreateFileForRepositoryLock - СоздатьФайлДляЗахватаОбъектов

SQL:
- SQLBackup[Full|Differential|Log][CopyOnly] - SQLРезервнаяКопия[Full|Differential|Log][CopyOnly]
- SQLRestore - SQLВосстановитьИзРезервнойКопии

GIT:
- GitPull[1|2|3|4|5] - ОбновитьИзГитРепозитория[1|2|3|4|5]


